# MusicPlayer

**Описание**  
MusicPlayer — это модульное Android-приложение, написанное на Kotlin, которое реализует музыкальный плеер с поддержкой потокового воспроизведения треков из Deezer API, локального воспроизведения скачанных треков, поиска и фонового воспроизведения. Приложение использует ExoPlayer (Media3) для воспроизведения музыки.

---

## Функциональность

- **Потоковое воспроизведение**  
  Воспроизведение треков, полученных через Deezer API, с возможностью фонового воспроизведения через Foreground Service и MediaSession.

- **Локальное воспроизведение**  
  Отображение списка скачанных треков, поиск по локальной базе, воспроизведение выбранного трека.

- **Поиск**  
  Реализован поиск треков как в списке удалённых (чартов/Deezer), так и в списке скачанных треков с использованием debounce и реактивных потоков.

- **Уведомления**  
  Отображение уведомления плеера с информацией о текущем треке (название, исполнитель, обложка) и возможностью перехода на начальный экран.

- **Навигация**  
  В MainActivity реализован Composable NavHost с BottomNavigationBar, который обеспечивает навигацию между экранами:
  - **ChartTracksScreen:** Экран для отображения чартов и поиска треков с Deezer.
  - **DownloadTracksScreen:** Экран для отображения и поиска скачанных треков из локального хранилища.
  - **PlayerScreen:** Экран плеера, отображаемый в NavHost.

  При нажатии на трек на любом из экранов со списком треков срабатывает callback, который прокидывается в NavHost.
- **Тема Material 3**  
  Приложение поддерживает светлую и тёмную темы, используя рекомендованные наборы цветов Material Design.

---

## Архитектура и Модули

Проект организован по принципам многомодульной архитектуры:

- **app**  
  Главный модуль, содержащий точку входа в приложение, реализацию Composable NavHost с BottomNavigationBar для навигации между основными экранами, а также обработку callback'ов для перехода в PlayerActivity.

- **core:network**  
  Модуль, отвечающий за сетевое взаимодействие и получение данных с Deezer API.

- **features:search-tracks**  
  Фича для отображения списка треков-чартов и поиска удалённых треков.

- **features:download-tracks**  
  Фича для отображения и поиска скачанных треков из локального хранилища.

- **features:player**  
  Фича плеера, включающая **Composable функцию PlayerScreen**, управление воспроизведением (с использованием ExoPlayer), уведомления и работу фонового сервиса.
---

## Используемые технологии

- **Язык:** Kotlin
- **UI:** Jetpack Compose
- **Медиа:** ExoPlayer (Media3)
- **Внедрение зависимостей:** Hilt
- **Сетевые запросы:** Retrofit/OkHttp (при необходимости)
- **Загрузка изображений:** Glide
- **Фоновое воспроизведение:** Foreground Service, MediaSession
- **Навигация:** Composable NavHost, BottomNavigationBar, явные Intents для перехода в PlayerActivity
- **Архитектурные подходы:** Clean Architecture, MVVM

---

## Установка и Сборка

### Способ №1: Установите APK

### Способ №2: Сборка из исходного кода

1. **Клонирование репозитория:**

   ```bash
   git clone https://github.com/jayelmeynak/MusicPlayer.git
    ```
2. **Открытие проекта:**

    Импортируйте проект в Android Studio.

3. **Сборка и запуск:**

    Соберите проект и запустите его на устройстве или эмуляторе. Для корректного отображения локальных треков убедитесь, что на устройстве присутствуют аудиофайлы.

---

## Дополнительная Информация

- **Обработка поиска и фильтрация**  
  Поиск треков реализован реактивно, что позволяет эффективно фильтровать списки удалённых и скачанных треков по мере ввода.

- **Фоновое воспроизведение**  
  ExoPlayer в сочетании с Foreground Service и MediaSession обеспечивает стабильное воспроизведение музыки даже при сворачивании приложения.

---

